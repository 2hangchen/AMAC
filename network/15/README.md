# TCP粘包

**主要是TCP缓冲区跟数据大小之间的关系**


1. 要发送的数据大于TCP发送缓冲区剩余空间大小，将会发生拆包。

2. 待发送数据大于MSS（最大报文长度），TCP在传输前将进行拆包。

3. 要发送的数据小于TCP发送缓冲区的大小，TCP将多次写入缓冲区的数据一次发送出去，将会发生粘包。

4. 接收数据端的应用层没有及时读取接收缓冲区中的数据，将发生粘包。

总结一下也就是说 发送的数据大于缓存区了，那么这个包就要被拆开发送了，如果小于缓存区，那么这里的区域中会出现很多包，就粘在一起了。

## 解决方案
粘包的方案

- 就是设置head信息，里面包括length，可以识别出是头是尾的话就不会发生粘连情况了。
- 或者设置分界点，我们只取分界点中间的数据就ok了。
- 或者发送端发送同样大小的数据（不够的用0补充）这样的话同样的大小，去除0就是我们要的数据了。

拆包的话，
- 我们要设置一个head，然后里面有length，获取数据后直接计算length，就可以获得真是的长度。
