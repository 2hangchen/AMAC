# 数据库

## 为啥mongodb用b树 mysql用b+

B+树非叶子节点上放的是聚集索引，是key的副本，是在内存中的。查数据的时候，再用key检索到具体的叶子节点把数据从磁盘顺序读出来（外部存储）。由于叶子节点有指针串联，又是平衡树，所以能很精确的去范围查询。再加上节点上只存放key所以占用空间小，而每次IO的空间是有限的，所以单次查找，无疑B+树查到的数据最多。再者，B+数有索引可以进行预读，不在范围类的数据也能加载到。mysql中每一个页都是一个节点（所以说mysql中的每一个树杈节点都很大这是红黑树比不了的，用红黑树那就太高了，磁盘io就多了，那速度就不行了），通过指针相连 可以更好的在不同的页中间来回的穿梭 ， b-树的话数据都以键值对的方式存放，而mongodb的数据恰好是这样的形式。查的时候直接取出来，很方便，减少IO。

## 为啥redis用跳表不用红黑树

为什么redis中用跳表不用红黑树？主要原因有这么几个
- 跳表范围查找比红黑树好
- 更好实现
- 并发状态下锁住的数据比红黑树少
- 动态更改的时候跳表要更改的数据少，红黑树则需要树化。更改更大


跳表如果消耗内存过大，其实可以调节索引的稠密程度，稍微稀疏一点占用的内存就少了。

## 为啥redis不用b+树

- 主要是reids经常在并发高的条件下使用，b+树的化每次数据更改都需要树化，但是跳表锁定的数据很少，很适合并发分布式状态下使用

- B树，B+树：它们特点是一样的，是多路查找树，一般用于数据库系统中，为什么，因为它们分支多层数少呗，
都知道磁盘IO是非常耗时的，而像大量数据存储在磁盘中所以我们要有效的减少磁盘IO次数避免磁盘频繁的查找。 这是多路树的作用在磁盘中减少io但是它不适合在并发分布式下，尤其是动态更改数据强烈的状态下使用
